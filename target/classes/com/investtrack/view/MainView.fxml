<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.ToolBar?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>

<BorderPane xmlns="http://javafx.com/javafx/17" 
            xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.investtrack.view.MainController">
    <top>
        <ToolBar>
            <items>
                <!-- Action Buttons -->
                <Button fx:id="btnAdd" text="Add Holding" onAction="#add" style="-fx-base: #4CAF50;"/> <!-- Green Add -->
                <Button fx:id="btnEdit" text="Edit Selected" onAction="#edit" style="-fx-base: #FFC107;"/> <!-- Amber Edit -->
                <Button fx:id="btnDelete" text="Delete Selected" onAction="#delete" style="-fx-base: #F44336;"/> <!-- Red Delete -->
                <Button fx:id="btnSell" text="Verkaufen" onAction="#sellHolding" style="-fx-base: #FF9800;"/> <!-- Orange for Sell -->
                <Separator orientation="VERTICAL" />
                <Button fx:id="btnAddStock" text="Add Predefined Stock" onAction="#addPredefinedStocksAction" style="-fx-base: #3F51B5;"/> <!-- Indigo for Stocks -->
                <Button fx:id="btnPerformance" text="Show Performance" onAction="#showPerformanceView" style="-fx-base: #9C27B0;"/> <!-- Purple for Performance -->
                <Separator orientation="VERTICAL" />
                <Button fx:id="btnChart" text="View Allocation Chart" onAction="#showChart" style="-fx-base: #2196F3;"/> <!-- Blue Chart -->
                <Separator orientation="VERTICAL" />
                <Button fx:id="btnReset" text="Reset Portfolio" onAction="#resetPortfolio" style="-fx-base: #795548;"/> <!-- Brown for Reset -->

                <!-- Spacer to push total label to the right -->
                <Region HBox.hgrow="ALWAYS" />

                <!-- Cash Balance Label -->
                <Label fx:id="lblCashBalance" text="Guthaben: €100.000.000,00" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 0 10 0 0;">
                    <HBox.margin>
                        <Insets right="10.0" />
                    </HBox.margin>
                </Label>

                <!-- Total Value Label -->
                <Label fx:id="lblTotal" text="Total: €0,00" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 0 10 0 0;">
                    <HBox.margin>
                        <Insets right="10.0" />
                    </HBox.margin>
                </Label>
            </items>
            <padding>
                <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
            </padding>
        </ToolBar>
    </top>

    <center>
        <!-- TableView for Holdings -->
        <TableView fx:id="holdingsTable" BorderPane.alignment="CENTER">
            <columns>
                <!-- Define Table Columns - fx:id links to Controller fields -->
                <TableColumn fx:id="colSymbol" text="Symbol" prefWidth="100.0" style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="colName" text="Name" prefWidth="200.0" style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="colQty" text="Quantity" prefWidth="100.0" style="-fx-alignment: CENTER-RIGHT;"/>
                <TableColumn fx:id="colPrice" text="Price/Unit" prefWidth="120.0" style="-fx-alignment: CENTER-RIGHT;"/>
                 <TableColumn fx:id="colValue" text="Current Value" prefWidth="130.0" style="-fx-alignment: CENTER-RIGHT; -fx-font-weight: bold;"/>
                <TableColumn fx:id="colType" text="Asset Type" prefWidth="120.0" style="-fx-alignment: CENTER;"/>
            </columns>
            <!-- Set column resize policy directly -->
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
            <!-- Default sort policy is usually sufficient. Removed incorrect fx:constant usage. -->
        </TableView>
    </center>
    <padding>
        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
    </padding>
</BorderPane>
